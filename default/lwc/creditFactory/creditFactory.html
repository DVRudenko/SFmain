<template>
    <div class="credit-factory"
         onshowtoast={showToast}
         ondoscoring={doScoringHandler}
         onreport={reportHandler}>
        <template if:true={toastMessage}>
            <div class="credit-factory__toast">
                <div class="slds-notify_container slds-is-relative">
                    <div class="slds-notify slds-notify_toast credit-factory__toast-inner" 
                         role="status">
                        <span class="slds-assistive-text">success</span>
                            <span class="slds-icon_container slds-icon-utility-success slds-m-right_small slds-no-flex slds-align-top" 
                                  title="Description of icon when needed">
                            <svg class="slds-icon slds-icon_small" 
                                 aria-hidden="true">
                                <use xlink:href="/apexpages/slds/latest/assets/icons/utility-sprite/svg/symbols.svg#success"
                                     if:true={toastMessage.success}></use>
                                <use xlink:href="/apexpages/slds/latest/assets/icons/utility-sprite/svg/symbols.svg#error"
                                     if:false={toastMessage.success}></use>
                            </svg>
                        </span>
                        <div class="slds-notify__content">
                            <h2 class="slds-text-heading_small "><lightning-formatted-rich-text value={toastMessage.text}></lightning-formatted-rich-text></h2>
                        </div>
                        <div class="slds-notify__close">
                            <button class="slds-button slds-button_icon slds-button_icon-inverse" 
                                    title="Close"
                                    onclick={hideToast}>
                                <svg class="slds-button__icon slds-button__icon_large" aria-hidden="true">
                                    <use xlink:href="/apexpages/slds/latest/assets/icons/utility-sprite/svg/symbols.svg#close"></use>
                                </svg>
                                <span class="slds-assistive-text">Close</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </template>
        <template if:true={isSearch}>
            <c-credit-factory-search opportunity-id={opportunityId}
                                     cf-data-map={dataMap}></c-credit-factory-search>
        </template>
        <template if:true={isReport}>
            <c-credit-factory-report opportunity-id={opportunityId}
                                     are-reports-exist={areReportsExist}
                                     selected-company-id={selectedCompanyId}></c-credit-factory-report>
        </template>
    </div>
</template>