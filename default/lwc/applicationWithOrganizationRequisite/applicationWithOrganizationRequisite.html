<template>
  <div class="form">
    <lightning-spinner if:true={isLoadingContent}
                       alternative-text="Loading"
                       size="large"
                       variant="brand"
                       class="spinner"
    >
    </lightning-spinner>
    <c-custom-toast></c-custom-toast>
    <lightning-spinner if:true={isSendToDirectum}
                       alternative-text="Loading"
                       size="large"
                       variant="brand"
                       class="spinner"
    >
    </lightning-spinner>
    <lightning-card variant="base" icon-name="standard:opportunity">
      <h1 slot="title" class="header">Шаблон реквизитов</h1>
      <c-organization-requisite-top-button-group
        onstartdeduplication={handleStartDeduplication}
        onstartsaving={handleStartSaving}
        onexportxls={exportExcel}
        disabled={isDisabled}
        onopenmodal={handleCreateClientClick}
      >
      </c-organization-requisite-top-button-group>
      <c-contact-data
              contact={contact}
              oncontactchange={handleContactDataChange}
              class="exportable-cmp"
      >
      </c-contact-data>
      <c-deduplication-result
              deduplication-result={deduplicationResult}
              onstartapprovalprocess={handleApprovalProcess}
              disabled={isDisabledApprovalProcess}
              class="exportable-cmp"
      >
      </c-deduplication-result>
      <c-counterparty-data
              opportunity-record-type-id={recordTypeId}
              counterparty={counterparty}
              oncounterpartychange={handleCounterpartyDataChange}
              oncounterpartycopyaddress={handleCopyAddress}
              oncounterpartyusesparkdata={handleUseSparkData}
              class="exportable-cmp"
      >
      </c-counterparty-data>
      <c-tariff-and-services
              opportunity-record-type-id={recordTypeId}
              tariff-and-services={tariffAndServices}
              class="exportable-cmp"
              ontariffandserviceschange={handleTariffAndServicesChange}
      >
      </c-tariff-and-services>
      <c-credit-conditions
              credit-factory-report-record-type-id={creditFactoryReportRecordTypeId}
              credit={credit}
              oncreditchange={handleCreditDataChange}
              oncreditconditionscheckcompany={handleCheckCompany}
              onstartapprovalprocess={handleApprovalProcess}
              disabled={isDisabledRMDApprovalProcess}
              class="exportable-cmp"
      >
      </c-credit-conditions>
      <c-profile-data
              profile={profile}
              onprofilechange={handleProfileDataChange}
              class="exportable-cmp"
      >
      </c-profile-data>
      <c-electronic-document-data
              opportunity-record-type-id={recordTypeId}
              electronic-document-data={electronicDocumentData}
              onelectronicdocumentchange={handleElectronicDocumentDataChange}
              class="exportable-cmp"
      >
      </c-electronic-document-data>
      <c-contract-data
              class="exportable-cmp"
              opportunity-record-type-id={recordTypeId}
              contract-data={contractData}
              oncontractdatachange={handleContractDataChange}
      >
      </c-contract-data>
      <c-bank-data
              bank-data={bankData}
              onbankdatachange={handleBankDataChange}
              class="exportable-cmp">
      </c-bank-data>
      <c-delivery-info
              counterparty={counterparty}
              delivery-info={deliveryInfo}
              ondeliveryinfochange={handleDeliveryInfoChange}
              class="exportable-cmp"
      >
      </c-delivery-info>
      <c-modal-window
        onclosemodal={handleCloseModal}
        oncreateclient={handleCreateClient}
        is-modal-open = {isModalOpen}
      >
      </c-modal-window>
    </lightning-card>
  </div>
</template>