import TARIFF_AND_SERVICES from "@salesforce/label/c.TariffAndServices";
import TARIFF from "@salesforce/label/c.Tariff";
import CHOOSE_TARIFF from "@salesforce/label/c.ChooseTariff";
import CARD_SAMOUNT from "@salesforce/label/c.CardsAmount";
import CARDS_AMOUNT_TK from "@salesforce/label/c.CardsAmountTK";
import CARDS_AMOUNT_BK from "@salesforce/label/c.CardsAmountBK";
import PROMO_CODE from "@salesforce/label/c.Promocode";
import CHOOSE_PROMO_CODE from "@salesforce/label/c.ChoosePromocode";
import ADDITIONAL_PROMO_CODE from "@salesforce/label/c.AdditionalPromocode";
import CHOOSE_ADDITIONAL_PROMO_CODE from "@salesforce/label/c.ChooseAdditionalPromocode";
import VIRTUAL_CARDS from "@salesforce/label/c.VirtualCards";
import PERSONAL_CONSULTANT from "@salesforce/label/c.PersonalConsultant";
import REPORT_DOCUMENTS_EXPRESS_DELIVERY from "@salesforce/label/c.ReportDocumentsExpressDelivery";
import CHOOSE_OPERATOR from "@salesforce/label/c.ChooseOperator";
import ELECTRONIC_DOCUMENT_MANAGEMENT from "@salesforce/label/c.ElectronicDocumentManagement";
import EDM_CONNECTION from "@salesforce/label/c.EdmConnection";
import CREDIT_CONDITIONS from "@salesforce/label/c.CreditConditions";
import RESULT from "@salesforce/label/c.Result";
import PRESCORING_DECISION from "@salesforce/label/c.PrescoringDecision";
import CREDIT_PERIOD from "@salesforce/label/c.Credit_period";
import CREDIT_LIMIT from "@salesforce/label/c.Credit_limit";
import PAYMENT_TIME_LIMIT from "@salesforce/label/c.Payment_time_limit";
import SCORING_EXPIRATION from "@salesforce/label/c.ScoringExpirationDate";
import CREDIT from "@salesforce/label/c.Credit";
import CHOOSE_SOLUTION from "@salesforce/label/c.ChooseSolution";
import CHECK_COMPANY_BUTTON_LABEL from "@salesforce/label/c.Check_company_for_credit";
import BANK_INFORMATION from "@salesforce/label/c.BankInformation";
import BANK_NAME from "@salesforce/label/c.BankName";
import BANK_BIC from "@salesforce/label/c.BankBic";
import CHAKING_ACCOUNT from "@salesforce/label/c.checkingAccount";
import COR_BANK_ACCOUNT from "@salesforce/label/c.corBankAccount";
import COUNTERPARTY_DATA from "@salesforce/label/c.CounterpartyData";
import ORGANIZATION_NAME from "@salesforce/label/c.OrganizationName";
import INN from "@salesforce/label/c.INN";
import KPP from "@salesforce/label/c.KPP";
import OGRN from "@salesforce/label/c.OGRN";
import OKVD from "@salesforce/label/c.OKVD";
import OKPO from "@salesforce/label/c.OKPO";
import LEGAL_ADDRESS from "@salesforce/label/c.LegalAddress";
import POSTAL_ADDRESS from "@salesforce/label/c.PostalAddress";
import COINCIDES_WITH_LEGAL from "@salesforce/label/c.CoincidesWithLegal";
import FULL_NAME_HEAD from "@salesforce/label/c.FullNameHead";
import HEAD_POSITION from "@salesforce/label/c.HeadPosition";
import USE_SPARK_DATA from "@salesforce/label/c.UseSPARK";
import FORECAST_LITERS from "@salesforce/label/c.ForecastLiters";
import CARS_AMOUNT from "@salesforce/label/c.CarsAmount";
import TRUCKS_AMOUNT from "@salesforce/label/c.TrucksAmount";
import PARTNER_PROGRAM from "@salesforce/label/c.PartnerProgram";
import SEARCH_CHANNEL_TYPE from "@salesforce/label/c.SearchChannelType";
import CHOOSE_SEARCH_CHANNEL_TYPE from "@salesforce/label/c.ChooseSearchChannelType";
import CONTACT_DATA from "@salesforce/label/c.ContactData";
import PHONE_NUMBER from "@salesforce/label/c.PhoneNumber";
import EMAIL from "@salesforce/label/c.ContactEmail";
import FULL_NAME from "@salesforce/label/c.FullName";
import POSITION from "@salesforce/label/c.Position";
import PERSONAL_ACCOUNT from "@salesforce/label/c.PersonalAccount";
import CODEWORD from "@salesforce/label/c.Codeword";
import ACCOUNT_EMAIL from "@salesforce/label/c.EmailForPersonalAccount";
import CONSOLIDATION_LC from "@salesforce/label/c.ConsolidationLC";
import RECIVING_NOTIFICATION from "@salesforce/label/c.NumberReceivingNotifications";
import DELIVERY_INFO from "@salesforce/label/c.DeliveryInfo";
import SHIPPING_ADDRESS from "@salesforce/label/c.ShippingAddress";
import SAME_AS_POSTAL_ADDRESS from "@salesforce/label/c.SameAsPostalAddress";
import ORIGINAL_DOCUMENT_COURIER_INFO from "@salesforce/label/c.OriginalDocumentCourierInfo";
import CARDS_DELIVERY_COURIER_INFO from "@salesforce/label/c.CardsDeliveryCourierInfo";
import CONTRACT_INFORMATION from "@salesforce/label/c.ContractInformation";
import PAYMENT_AMMOUNT from "@salesforce/label/c.PaymentAmount";
import ORGANIZATION from "@salesforce/label/c.Organization";
import CHOOSE_ORGANIZATION from "@salesforce/label/c.ChooseOrganization";
import CONTRACT_TYPE from "@salesforce/label/c.ContractType";
import CHOOSE_CONTRACT_TYPE from "@salesforce/label/c.ChooseContractType";
import CONTRACT_SUBJECT from "@salesforce/label/c.ContarctSubject";
import CONTRACT_NOTE from "@salesforce/label/c.ContractNote";
import STANDART_CONTRACT from "@salesforce/label/c.StandartContract";
import CONTRACT_AMOUNT from "@salesforce/label/c.ContractAmount";
import WITH_AUTO_ROLLOVER from "@salesforce/label/c.WithAutoRollover";
import UNKNOWN_BANK from "@salesforce/label/c.UnknownBank";
import COMPLETE_THIS_FIELD from "@salesforce/label/c.CompleteThisField";
import COMPLETE_ADDRESS_FIELD from "@salesforce/label/c.CompleteAddressField";
import INCORRECT_ADDRESS_FIELD from "@salesforce/label/c.IncorrectAddressField";
import INVALID_TURNOVER_ERROR from "@salesforce/label/c.Invalid_turnonver";
import INVALID_INN_ERROR from "@salesforce/label/c.Invalid_INN";
import SYSTEM_EXCEPTION from "@salesforce/label/c.System_exception";
import INN_NOT_EXIST from "@salesforce/label/c.INN_notExist";
import START_DEDUPLICATION from "@salesforce/label/c.StartDeduplication";
import DEDUPLICATION_RESULT from "@salesforce/label/c.DeduplicationResult";
import DEDUPLICATION_RESULT_FIELD from "@salesforce/label/c.DeduplicationResultField";
import DEDUPLICATION_RESULT_TRUE from "@salesforce/label/c.DeduplicationResultTrue";
import DEDUPLICATION_RESULT_FALSE from "@salesforce/label/c.DeduplicationResultFalse";
import DEDUPLICATION_RESULT_APPROVED from "@salesforce/label/c.DeduplicationResultApproved";
import RMD_RESULT_APPROVED from "@salesforce/label/c.RMDResultApproved";
import CREATE_CLIENT from "@salesforce/label/c.CreateClient";
import CREATE_CLIENT_QUESTION from "@salesforce/label/c.CreateClientQuestion";
import CREATE_CLIENT_QUESTION_HEADER from "@salesforce/label/c.CreateClientQuestionHeader";
import CREATE_CLIENT_CANCEL from "@salesforce/label/c.CreateClientCancel";
import CONTACT_ERROR from "@salesforce/label/c.ContactError";
import SEND_FOR_APPROVAL from "@salesforce/label/c.SendForApproval";
import SEND_FOR_RMD_APPROVAL from "@salesforce/label/c.SendForRMDApproval";
import FAILED_TO_SEND from "@salesforce/label/c.FailedToSend";
import OPPORTUNITY_HAS_BEEN_SEND from "@salesforce/label/c.OpportunityHasBeenSent";
import OPPORTUNITY_IS_PENDING from "@salesforce/label/c.OpportunityIsPending";
import SAVE from "@salesforce/label/dsfs.Save";
import CHECK_SECTIONS from "@salesforce/label/c.CheckSections";
import DATA_SAVED_SUCCESSFULLY from "@salesforce/label/c.RecordWasSavedSuccessfully";
import PRESCORING from "@salesforce/label/c.Prescoring_label";
import BLACK_LIST_DECISION_FOUND from "@salesforce/label/c.BlackListDecision_found";
import LOCKED_BY_APPROVAL_PROCESS from "@salesforce/label/c.Is_locked_by_approval_process";
import REQUEST_DIRECTUM from "@salesforce/label/c.Request_to_Directum";
import REQUEST_DIRECTUM_FAIL from "@salesforce/label/c.Request_to_Directum_failure";
import SEND_OPPORTUNITY_FOR_APPROVAL from "@salesforce/label/c.Send_opportunity_for_approval";
import EXPORT_XLS from "@salesforce/label/c.Export_excel";

const PATTERN = {
  phone: "^[+]7 [0-9]{3} [0-9]{3} [0-9]{2} [0-9]{2}$",
  email: "^.+@.+[.][a-zA-Z]{2,7}$",
  iNN: "^[0-9]{10}(?:[0-9]{2})?$",
  text: "[а-яА-ЯёЁ '-]+$",
  kPP: "^[0-9]{9}$",
  oGRN: "^[0-9]{13}$",
  oKPO: "^[0-9]{8}(?:[0-9]{2})?$",
  codeWord: "^[А-Яа-яЁё]{5,20}$",
  address: "^[0-9а-яА-ЯёЁIVX ,.'\"/()-]+$",
  bicPattern: "^[0-9]{9}$",
  checkingPattern: "^[0-9]{20}$",
  turnover: "^[1-9][0-9]{0,9}$"
};

const LABELS = {
  EXPORT_XLS,
  SYSTEM_EXCEPTION,
  INVALID_TURNOVER_ERROR,
  INVALID_INN_ERROR,
  TARIFF_AND_SERVICES,
  TARIFF,
  CHOOSE_TARIFF,
  CARD_SAMOUNT,
  CARDS_AMOUNT_TK,
  CARDS_AMOUNT_BK,
  PROMO_CODE,
  CHOOSE_PROMO_CODE,
  ADDITIONAL_PROMO_CODE,
  CHOOSE_ADDITIONAL_PROMO_CODE,
  VIRTUAL_CARDS,
  PERSONAL_CONSULTANT,
  REPORT_DOCUMENTS_EXPRESS_DELIVERY,
  CHOOSE_OPERATOR,
  ELECTRONIC_DOCUMENT_MANAGEMENT,
  EDM_CONNECTION,
  CREDIT_CONDITIONS,
  RESULT,
  PRESCORING_DECISION,
  CREDIT_PERIOD,
  CREDIT_LIMIT,
  PAYMENT_TIME_LIMIT,
  SCORING_EXPIRATION,
  CREDIT,
  CHOOSE_SOLUTION,
  CHECK_COMPANY_BUTTON_LABEL,
  BANK_INFORMATION,
  BANK_NAME,
  BANK_BIC,
  CHAKING_ACCOUNT,
  COR_BANK_ACCOUNT,
  COUNTERPARTY_DATA,
  ORGANIZATION_NAME,
  INN,
  KPP,
  OGRN,
  OKVD,
  OKPO,
  LEGAL_ADDRESS,
  POSTAL_ADDRESS,
  COINCIDES_WITH_LEGAL,
  FULL_NAME_HEAD,
  HEAD_POSITION,
  USE_SPARK_DATA,
  FORECAST_LITERS,
  CARS_AMOUNT,
  TRUCKS_AMOUNT,
  PARTNER_PROGRAM,
  SEARCH_CHANNEL_TYPE,
  CHOOSE_SEARCH_CHANNEL_TYPE,
  CONTACT_DATA,
  PHONE_NUMBER,
  EMAIL,
  FULL_NAME,
  POSITION,
  PERSONAL_ACCOUNT,
  CODEWORD,
  ACCOUNT_EMAIL,
  CONSOLIDATION_LC,
  RECIVING_NOTIFICATION,
  DELIVERY_INFO,
  SHIPPING_ADDRESS,
  SAME_AS_POSTAL_ADDRESS,
  ORIGINAL_DOCUMENT_COURIER_INFO,
  CARDS_DELIVERY_COURIER_INFO,
  CONTRACT_INFORMATION,
  PAYMENT_AMMOUNT,
  ORGANIZATION,
  CHOOSE_ORGANIZATION,
  CONTRACT_TYPE,
  CHOOSE_CONTRACT_TYPE,
  CONTRACT_SUBJECT,
  CONTRACT_NOTE,
  STANDART_CONTRACT,
  CONTRACT_AMOUNT,
  WITH_AUTO_ROLLOVER,
  UNKNOWN_BANK,
  COMPLETE_THIS_FIELD,
  COMPLETE_ADDRESS_FIELD,
  INCORRECT_ADDRESS_FIELD,
  INN_NOT_EXIST,
  START_DEDUPLICATION,
  DEDUPLICATION_RESULT,
  DEDUPLICATION_RESULT_FIELD,
  DEDUPLICATION_RESULT_TRUE,
  DEDUPLICATION_RESULT_FALSE,
  DEDUPLICATION_RESULT_APPROVED,
  RMD_RESULT_APPROVED,
  CREATE_CLIENT,
  CREATE_CLIENT_QUESTION,
  CREATE_CLIENT_QUESTION_HEADER,
  CREATE_CLIENT_CANCEL,
  CONTACT_ERROR,
  SEND_FOR_APPROVAL,
  SEND_FOR_RMD_APPROVAL,
  FAILED_TO_SEND,
  OPPORTUNITY_HAS_BEEN_SEND,
  OPPORTUNITY_IS_PENDING,
  SAVE,
  CHECK_SECTIONS,
  DATA_SAVED_SUCCESSFULLY,
  PRESCORING,
  BLACK_LIST_DECISION_FOUND,
  LOCKED_BY_APPROVAL_PROCESS,
  REQUEST_DIRECTUM,
  REQUEST_DIRECTUM_FAIL,
  SEND_OPPORTUNITY_FOR_APPROVAL
};

const applyRussianPhoneMask = (value) => {
  if (value != null) {
    const partsOfPhone = value
      .replace(/\D+/g, "")
      .match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);

    if (partsOfPhone[0].length == 1) {
      return "+7 " + (partsOfPhone[1] == 7 ? "" : partsOfPhone[1]);
    } else if (partsOfPhone[0].length > 1) {
      let phormatedPhone = "+7";

      for (let i = 2; i < 6; i++) {
        if (partsOfPhone[i]) {
          phormatedPhone += " " + partsOfPhone[i];
        }
      }

      return phormatedPhone;
    } else {
      return "";
    }
  }
};

const replaceExtraSpaces = (value, spaceReplaceString) => {
  let formatedValue =
    value == null ? "" : value.trim().replace(/\s+/g, spaceReplaceString);
  return formatedValue;
};

const parseContactFullName = (contactName) => {
  if (contactName != null) {
    let formatedName = replaceExtraSpaces(contactName, "#");
    let nameParts = formatedName.split("#");
    while (nameParts.length > 3) {
      nameParts[2] = nameParts[2] + " " + nameParts.pop();
    }
    return nameParts;
  }
  return "";
};

const mergeContactFullNameInRussianFormat = (
  lastName,
  firstName,
  middleName
) => {
  lastName = lastName != null ? lastName : "";
  firstName = firstName != null ? " " + firstName : "";
  middleName = middleName != null ? " " + middleName : "";
  let formatedFullName = lastName + firstName + middleName;
  return formatedFullName;
};

const mergeRussianAddress = (postalCode, state, region, city, street) => {
  let addressParts = [];
  if (postalCode != null) {
    addressParts.push(postalCode);
  }
  if (state != null) {
    addressParts.push(state);
  }
  if (region != null) {
    addressParts.push(region);
  }
  if (city != null) {
    addressParts.push(city);
  }
  if (street != null) {
    addressParts.push(street);
  }
  let mergedAddress = addressParts.join(", ");
  return mergedAddress;
};

const getStringSimilarityCoeff = (firstString, secondString) => {
  if (firstString != null && secondString != null) {
    if (firstString.length != 0 && secondString.length != 0) {
      firstString = firstString.replace(/[\s.,%]/g, "");
      secondString = secondString.replace(/[\s.,%]/g, "");
      let sumOfSameSymbols = 0;
      for (let sym of firstString) {
        if (secondString.includes(sym)) {
          secondString = secondString.replace(sym, "");
          sumOfSameSymbols += 1;
        }
      }
      let coeff =
        sumOfSameSymbols /
        (firstString.length + secondString.length - sumOfSameSymbols);
      return coeff;
    }
  }
};

class TextUtils {}

export {
  TextUtils,
  PATTERN,
  LABELS,
  getStringSimilarityCoeff,
  applyRussianPhoneMask,
  replaceExtraSpaces,
  parseContactFullName,
  mergeContactFullNameInRussianFormat,
  mergeRussianAddress
};
