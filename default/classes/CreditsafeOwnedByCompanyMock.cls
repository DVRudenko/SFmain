@isTest
global class CreditsafeOwnedByCompanyMock implements HttpCalloutMock {
  	global HttpResponse respond(HTTPRequest request){
	    String requestType = '';
  		if (request.getEndpoint() == 'https://connect.creditsafe.com/v1/authenticate') {
  			requestType = 'Creditsafe Auth';
  		} else if (request.getEndpoint().contains('https://connect.creditsafe.com/v1/companies') && request.getHeader('Content-Type') == 'application/json') {
  			requestType = 'Creditsafe JSON';
  		} else if (request.getEndpoint().contains('https://connect.creditsafe.com/v1/companies') && request.getHeader('Content-Type') == 'application/pdf') {
  			requestType = 'Creditsafe PDF';
  		}
		  
    	Map<String, String> requestBodyMap = new Map<String, String>();
		requestBodyMap.put('Creditsafe Auth', '{"token":"eyJraWQiOiJNSytSKzRhYUk4YjBxVkhBMkZLZFN4Ykdpb3RXbTNXOGhZWE45dXF3K3YwPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiI0MGM2MGY0Ni0wNzlhLTQ2NTctOTk4MS03NWNhODIyZmMwNjgiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LXdlc3QtMS5hbWF6b25hd3MuY29tXC9ldS13ZXN0LTFfTXY4TUFxaDFjIiwiY29nbml0bzp1c2VybmFtZSI6Im5pa2l0YS5wb3BvdkBmbGVldGNvci5ydSIsImN1c3RvbTpjc1VzZXJJZCI6IjEwMDA0NjE1MjAiLCJhdWQiOiI0cDg4ZGRnN3VnNnIxam1groupStructurela2Rkdmluam9xMCIsImN1c3RvbTpjc1VzZXJDb3VudHJ5Q29kZSI6Ik5MIiwiZXZlbnRfaWQiOiI0ZmMzM2JkNS1hN2RhLTQxZWMtYjk4Mi03OGUzM2M1MGVmMWIiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTU2NTI0OTE0OSwiZXhwIjoxNTY1MjUyNzQ5LCJpYXQiOjE1NjUyNDkxNDksImVtYWlsIjoibmlraXRhLnBvcG92QGZsZWV0Y29yLnJ1In0.ljym9TO8WeXc-AyMJPKBTvifO9_ApxmbgkkKZEJzX_rLpNz8QF6NsCafTZhFnAJf8I69iqkmrcw9vSJWEGcXZkpcdWQvh5BnnuCbOWvsPb3IrvLQYFuItuuYsaPBPA5M7RaMH037eEgYopjKY1KKLfBaMWpyUkqP2ETqAAlkOWmG-jOgPuI99DLt_yR47YOoLNLSrXHbQ6vVAcXVrGTp5bp8_W661SUYMzE91I8UsBHdt7NkfAWXU6_H1CjywaHPNyV9kWDsZrRxRh_Z3yJYrJC0qQryfRvqLiF2yV73HhqrJ_BGx47BOjtsF-NLZkn_Q7KnScWB7qoOEE1S_DcTMQ"}');
    	requestBodyMap.put('Creditsafe JSON', '{"orderId": "N/A","companyId": "NL-X-634214960000","dateOfOrder": "2019-08-08T14:27:56.770Z","language": "en","userId": "1000461520","chargeRef": null,"report": {"companyId": "NL001-X-634214960000","language": "EN","companySummary": {"businessName": "Freyja Fence B.V.","country": "NL","companyNumber": "NL03987521","companyRegistrationNumber": "63421496","mainActivity": {"code": "46699","description": "Wholesale of other machines, equipment and supplies for manufacturing and trade n.e.c.","classification": "SBI 2008"},"companyStatus": {"status": "Active","description": "ACTIVE"},"latestShareholdersEquityFigure": {"currency": "EUR","value": 133641},"creditRating": {"commonValue": "C","commonDescription": "Moderate Risk","creditLimit": {"value": "7500"},"providerValue": {"maxValue": "100","minValue": "0","value": "49"},"providerDescription": "Low chance of financial calamity"}},"companyIdentification": {"basicInformation": {"businessName": "Freyja Fence B.V.","registeredCompanyName": "Freyja Fence B.V.","companyRegistrationNumber": "63421496","country": "NL","companyRegistrationDate": "2015-05-29T00:00:00Z","operationsStartDate": "2015-05-29T00:00:00Z","legalForm": {"providerCode": "41","description": "Private limited liability company (BV) with ordinary structure"},"companyStatus": {"status": "Active","description": "ACTIVE"},"principalActivity": {"code": "46699","description": "Wholesale of other machines, equipment and supplies for manufacturing and trade n.e.c.","classification": "SBI 2008"},"contactAddress": {"simpleValue": "32 De Huufkes, NUENEN 5674TM","street": "De Huufkes","houseNumber": "32","city": "NUENEN","postalCode": "5674TM","province": "Brabant","telephone": "0621572525","country": "NL"}},"activityClassifications": [{"classification": "SBI 2008","activities": [{"code": "46699","description": "Wholesale of other machines, equipment and supplies for manufacturing and trade n.e.c."},{"code": "77299","description": "Renting of other consumer goods n.e.c."},{"code": "De in- en verkoop en verhuur van hekwerken en toebehoren.,Full service leverancier gericht op de evenementenbranche, het geven van adviezen aan, het begeleiden van evenementenorganisaties alsmede het verhuren of verkopen van evenementenvoorzieningen.,Het verrichten van activiteiten in de algehele bouwhekbranche inclusief verhuur, verkoop en dienstverlening."}]}]},"creditScore": {"currentCreditRating": {"commonValue": "C","commonDescription": "Moderate Risk","creditLimit": {"value": "7500"},"providerValue": {"maxValue": "100","minValue": "0","value": "49"},"providerDescription": "Low chance of financial calamity"},"previousCreditRating": {"commonValue": "C","commonDescription": "Moderate Risk","creditLimit": {"value": "7500"},"providerValue": {"value": "55"},"providerDescription": "Low chance of financial calamity"},"latestRatingChangeDate": "2019-04-07T23:30:40Z"},"contactInformation": {"mainAddress": {"simpleValue": "32 De Huufkes, NUENEN 5674TM","street": "De Huufkes","houseNumber": "32","city": "NUENEN","postalCode": "5674TM","province": "Brabant","telephone": "0621572525","country": "NL"},"otherAddresses": [{"simpleValue": "32 De Huufkes, NUENEN 5674TM","street": "De Huufkes","houseNumber": "32","city": "NUENEN","postalCode": "5674TM","country": "NL"}]},"shareCapitalStructure": {"issuedShareCapital": {"value": 10},"shareHolders": [{"name": "Heblo B.V.","address": {"simpleValue": "32 De Huufkes, NUENEN 5674TM","street": "De Huufkes","houseNumber": "32","city": "NUENEN","postalCode": "5674TM","country": "NL"},"percentSharesHeld": 100}]},"directors": {"currentDirectors": [{"id": "63421496","name": "Heblo B.V.","firstNames": "Heblo B.V.","gender": "Unknown","directorType": "Company","positions": [{"dateAppointed": "2015-05-29T00:00:00Z","positionName": "Enig aandeelhouder"}]},{"id": "63421496","name": "Heblo B.V.","firstNames": "Heblo B.V.","gender": "Unknown","directorType": "Company","positions": [{"dateAppointed": "2015-05-29T00:00:00Z","positionName": "Algemeen directeur","authority": "Alleen/zelfstandig bevoegd"}]}]},"otherInformation": {"employeesInformation": [{"year": 2017,"numberOfEmployees": "5"},{"year": 2016,"numberOfEmployees": "5"},{"year": 2015,"numberOfEmployees": "5"}]},"groupStructure": {},"extendedGroupStructure": [{"id": "NL-X-171932870000","country": "NL","safeNumber": "NL00869697","companyName": "Heblo B.V.","registeredNumber": "171932870000","latestAnnualAccounts": "2017-12-31T00:00:00Z","level": 0,"status": "Active","commonRatingBand": "B"},{"id": "NL-X-634214960000","country": "NL","safeNumber": "NL03987521","companyName": "Freyja Fence B.V.","registeredNumber": "634214960000","latestAnnualAccounts": "2017-12-31T00:00:00Z","level": 1,"status": "Active","commonRatingBand": "C"}],"financialStatements": [{"type": "GlobalFinancialsGGS","yearEndDate": "2017-12-31T00:00:00Z","numberOfWeeks": 52,"currency": "EUR","consolidatedAccounts": false,"balanceSheet": {"totalTangibleAssets": 13904,"totalIntangibleAssets": 77000,"investments": 1300,"totalFixedAssets": 92204,"miscellaneousReceivables": 189762,"totalReceivables": 189762,"cash": 34668,"totalCurrentAssets": 224430,"totalAssets": 316634,"miscellaneousLiabilities": 171443,"totalCurrentLiabilities": 171443,"miscellaneousLiabilitiesDueAfter1Year": 11550,"totalLongTermLiabilities": 11550,"totalLiabilities": 182993,"calledUpShareCapital": 10,"otherReserves": 133631,"totalShareholdersEquity": 133641},"otherFinancials": {"workingCapital": 52987,"netWorth": 56641},"ratios": {"currentRatio": 1.31,"liquidityRatioOrAcidTest": 1.31,"currentDebtRatio": 1.28,"gearing": 8.64,"equityInPercentage": 55.77,"totalDebtRatio": 1.37}},{"type": "GlobalFinancialsGGS","yearEndDate": "2016-12-31T00:00:00Z","numberOfWeeks": 52,"currency": "EUR","consolidatedAccounts": false,"balanceSheet": {"totalTangibleAssets": 10921,"totalIntangibleAssets": 88000,"investments": 1300,"totalFixedAssets": 100221,"miscellaneousReceivables": 232190,"totalReceivables": 232190,"cash": 9429,"totalCurrentAssets": 241619,"totalAssets": 341840,"miscellaneousLiabilities": 244044,"totalCurrentLiabilities": 244044,"miscellaneousLiabilitiesDueAfter1Year": 13200,"totalLongTermLiabilities": 13200,"totalLiabilities": 257244,"calledUpShareCapital": 10,"otherReserves": 84586,"totalShareholdersEquity": 84596},"otherFinancials": {"workingCapital": -2425,"netWorth": -3404},"ratios": {"currentRatio": 0.99,"liquidityRatioOrAcidTest": 0.99,"currentDebtRatio": 2.88,"gearing": 15.6,"equityInPercentage": 33.33,"totalDebtRatio": 3.04}},{"type": "GlobalFinancialsGGS","yearEndDate": "2015-12-31T00:00:00Z","numberOfWeeks": 52,"currency": "EUR","consolidatedAccounts": false,"balanceSheet": {"totalTangibleAssets": 5966,"totalIntangibleAssets": 99000,"totalFixedAssets": 104966,"totalInventories": 13882,"miscellaneousReceivables": 194084,"totalReceivables": 194084,"cash": 12965,"totalCurrentAssets": 220931,"totalAssets": 325897,"miscellaneousLiabilities": 228904,"totalCurrentLiabilities": 228904,"miscellaneousLiabilitiesDueAfter1Year": 14850,"totalLongTermLiabilities": 14850,"totalLiabilities": 243754,"calledUpShareCapital": 10,"otherReserves": 82133,"totalShareholdersEquity": 82143},"otherFinancials": {"workingCapital": -7973,"netWorth": -16857},"ratios": {"currentRatio": 0.97,"liquidityRatioOrAcidTest": 0.9,"currentDebtRatio": 2.79,"gearing": 18.08,"equityInPercentage": 36.2,"totalDebtRatio": 2.97}}],"localFinancialStatements": [{"type": "LocalFinancialStatement","yearEndDate": "2017-12-31T00:00:00Z","numberOfWeeks": 52,"currency": "EUR","consolidatedAccounts": false,"balanceSheet": {"intangibleAsset": 77000,"tangibleAssets": 13904,"financialFixedAssets": 1300,"fixedAssets": 92204,"otherReceivables": 189762,"cash": 34668,"miscCurrentAssets": 0,"currentAssetsTotal": 224430,"totalAssets": 316634,"issuedShareCapital": 10,"retainedEarnings": 0,"otherReserves": 133631,"groupNetWorth": 0,"totalEquity": 133641,"provisions": 11550,"otherLongTermLiabilities": 0,"totalLongTermDebts": 11550,"miscCurrentLiabilities": 171443,"totalCurrentLiabilities": 171443},"otherFinancials": {"workingCapital": 52987,"netWorth": 56641},"ratios": {"currentRatio": 1.31,"liquidityRatio": 1.31,"currentDebtRatio": 1.28,"gearing": 8.64,"equityInPercentage": 55.77,"totalDebtRatio": 1.37}},{"type": "LocalFinancialStatement","yearEndDate": "2016-12-31T00:00:00Z","numberOfWeeks": 52,"currency": "EUR","consolidatedAccounts": false,"balanceSheet": {"intangibleAsset": 88000,"tangibleAssets": 10921,"financialFixedAssets": 1300,"fixedAssets": 100221,"otherReceivables": 232190,"cash": 9429,"miscCurrentAssets": 0,"currentAssetsTotal": 241619,"totalAssets": 341840,"issuedShareCapital": 10,"retainedEarnings": 0,"otherReserves": 84586,"groupNetWorth": 0,"totalEquity": 84596,"provisions": 13200,"otherLongTermLiabilities": 0,"totalLongTermDebts": 13200,"miscCurrentLiabilities": 244044,"totalCurrentLiabilities": 244044},"otherFinancials": {"workingCapital": -2425,"netWorth": -3404},"ratios": {"currentRatio": 0.99,"liquidityRatio": 0.99,"currentDebtRatio": 2.88,"gearing": 15.6,"equityInPercentage": 33.33,"totalDebtRatio": 3.04}},{"type": "LocalFinancialStatement","yearEndDate": "2015-12-31T00:00:00Z","numberOfWeeks": 52,"currency": "EUR","consolidatedAccounts": false,"balanceSheet": {"intangibleAsset": 99000,"tangibleAssets": 5966,"financialFixedAssets": 0,"fixedAssets": 104966,"inventories": 13882,"otherReceivables": 194084,"cash": 12965,"miscCurrentAssets": 0,"currentAssetsTotal": 220931,"totalAssets": 325897,"issuedShareCapital": 10,"retainedEarnings": 0,"otherReserves": 82133,"groupNetWorth": 0,"totalEquity": 82143,"provisions": 14850,"otherLongTermLiabilities": 0,"totalLongTermDebts": 14850,"miscCurrentLiabilities": 228904,"totalCurrentLiabilities": 228904},"otherFinancials": {"workingCapital": -7973,"netWorth": -16857},"ratios": {"currentRatio": 0.97,"liquidityRatio": 0.9,"currentDebtRatio": 2.79,"gearing": 18.08,"equityInPercentage": 36.2,"totalDebtRatio": 2.97}}],"additionalInformation": {"misc": {"exporter": "No","importer": "No","rsinNumber": "855228660","companyAge": 4,"latestAccountsDate": "2017-12-31T00:00:00Z","numberOfSearchesL12": 7,"kvkStatus": "C-Changed","branchNumber": "000032339453","statutaireSeal": "Nuenen, Gerwen en Nederwetten","employeeNumber": "5","employeeClass": "04"},"industryQuartileAnalysis": {"paymentExpectationDays": {"paymentExpectationsLower": 38.47,"paymentExpectationsMedian": 49.04,"paymentExpectationsUpper": 63.28},"daySalesOutstanding": {"daySalesOutstandingLower": 11.4,"daySalesOutstandingMedian": 29.41,"daySalesOutstandingUpper": 55.02}},"industryComparison": {"industryAverageCreditRating": 57.1,"industryAverageCreditLimit": 56845.63},"paymentExpectationsSummary": {"suspensionOfPaymentsMora": "No","industryAveragePaymentExpectationDays": 52.78,"industryAverageDaySalesOutstanding": 60.29},"ratingHistory": [{"commonValue": "C","commonDescription": "Moderate Risk","providerValue": {"value": "55"},"date": "2019-04-07T23:30:40Z"},{"commonValue": "B","commonDescription": "Low Risk","providerValue": {"value": "64"},"date": "2019-03-07T23:30:37Z"},{"commonValue": "C","commonDescription": "Moderate Risk","providerValue": {"value": "49"},"date": "2018-08-31T18:59:27Z"},{"commonValue": "C","commonDescription": "Moderate Risk","providerValue": {"value": "38"},"date": "2018-05-03T23:10:00Z"}],"limitHistory": [{"date": "2019-04-07T23:30:40Z","companyValue": 7500},{"date": "2019-03-07T23:30:37Z","companyValue": 9500},{"date": "2018-08-31T18:59:27Z","companyValue": 7500},{"date": "2018-05-03T23:10:00Z","companyValue": 5500}],"commentaries": [{"commentaryText": "The business was established over 4 years ago.","positiveOrNegative": "Neutral"},{"commentaryText": "The business has 4 employees.","positiveOrNegative": "Neutral"},{"commentaryText": "The business is part of a group.","positiveOrNegative": "Neutral"},{"commentaryText": "The business has been at the address for over 3 years.","positiveOrNegative": "Neutral"},{"commentaryText": "There has been no significant change in the business\'s credit limit.","positiveOrNegative": "Neutral"},{"commentaryText": "The credit rating for this business has decreased from 55 to 49 on 08-06-2019.","positiveOrNegative": "Negative"},{"commentaryText": "The financial statements on file are 19 months old.","positiveOrNegative": "Neutral"},{"commentaryText": "The business saw an increase in their Cash Balance of 267% during the latest trading period.","positiveOrNegative": "Positive"}],"companyHistory": [{"date": "2016-03-17T22:39:30Z","description": "MAIL HOUSE NO CHANGE","previousValue": "40","currentValue": "32"},{"date": "2016-03-17T22:39:33Z","description": "MAIL POSTAL CODE CHANGE","previousValue": "5674CD","currentValue": "5674TM"},{"date": "2016-03-17T22:39:44Z","description": "MAIL STREET NAME CHANGE","previousValue": "Spegelt","currentValue": "De Huufkes"},{"date": "2016-03-17T22:40:05Z","description": "Address changed.","previousValue": "5674CD","currentValue": "5674TM"},{"date": "2016-03-17T22:40:13Z","description": "Address changed.","previousValue": "40","currentValue": "32"},{"date": "2016-03-17T22:40:16Z","description": "Address changed.","previousValue": "Spegelt","currentValue": "De Huufkes"},{"date": "2016-07-14T00:37:32Z","description": "New accounts filed.","currentValue": "31/12/2015"},{"date": "2017-08-10T19:29:30Z","description": "New accounts filed.","currentValue": "31/12/2016"},{"date": "2018-05-03T23:58:55Z","description": "New accounts filed.","currentValue": "31/12/2017"}],"kvkFilings": [{"filingDate": "2015-06-01T00:00:00Z","filedEvent": "Director in/out of appointement"},{"filingDate": "2016-06-29T00:00:00Z","filedEvent": "New financial accounts filed"},{"filingDate": "2018-04-18T00:00:00Z","filedEvent": "New financial accounts filed"},{"filingDate": "2017-03-10T00:00:00Z","filedEvent": "New financial accounts filed"},{"filingDate": "2015-06-01T00:00:00Z","filedEvent": "New establishment"}],"tradingStyles": [{"tradingName": "Freyja Fence B.V."}]}}}');
		requestBodyMap.put('Creditsafe PDF', 'test PDF');
    	HttpResponse response = new HttpResponse();
    	response.setBody(requestBodyMap.get(requestType));
		response.setStatus('OK');
		response.setStatusCode(200);
    	return response;
	}
}